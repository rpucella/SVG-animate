<html>
  <head>

    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="svg-anim.js" charset="utf-8"></script>

    <script>
      
window.addEventListener("load",run);

function run () { 

    console.log("Ready to animate");

    var rotR1 = faster(1,rotate(element("r1",200,200),deg));
    var rotR2 = faster(0.30,rotate(element("r2",750,250),mult(-1,deg)));

    var circR1 = translate(rotR1,
			   mult(rampTo(100,1000),faster(0.001,wiggle)),
			   mult(rampTo(100,1000),faster(0.001,waggle)));
    
    var t = delay(1000,overlay(delay(1000,circR1),rotR2));

    var orbit = delay(3000,translate(spin(element("r3",500,250),0.5),
				     mult(rampTo(400,2000),faster(0.003,wiggle)),
				     mult(rampTo(150,2000),faster(0.003,waggle))));

    animate(overlay(t,orbit));

}
      
    </script>
  </head>
  <body>

    <svg width="1000" height="500">
        <rect id="r1" x="200" y="200" height="100" width="100" fill="red"></rect>
        <rect id="r2" x="700" y="200" height="100" width="100" fill="blue"></rect>
        <rect id="r3" x="450" y="230" width="100" height="40" fill="green"></rect>
    </svg>

  </body>
</html>
